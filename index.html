<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ëª¨ë‘ì˜ ìˆ˜ì‹œ 3ê°œë…„ ì…ì‹œê²°ê³¼ ë¹„êµ ì˜¨ë„ê³„</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", system-ui, sans-serif;
      background: radial-gradient(circle at top, #ffe7f0, #ffe7d1);
      color: #222;
    }
    .page {
      max-width: 1200px;
      margin: 0 auto;
      padding: 24px 16px 60px;
    }
    h1 {
      font-size: 32px;
      margin: 0 0 4px;
      font-weight: 700;
    }
    .subtitle {
      font-size: 13px;
      color: #555;
      margin-bottom: 24px;
    }
    .pill {
      display: inline-flex;
      align-items: center;
      padding: 8px 14px;
      border-radius: 999px;
      background: linear-gradient(to right, #ff9f7d, #ff5f6d);
      color: #fff;
      font-size: 13px;
      font-weight: 600;
      box-shadow: 0 6px 16px rgba(0,0,0,0.12);
      margin-right: 8px;
    }
    .pill span {
      margin-right: 6px;
    }
    .pill--secondary {
      background: #fff;
      color: #555;
      box-shadow: none;
      border: 1px solid rgba(0,0,0,0.05);
    }

    .card-row {
      display: flex;
      flex-wrap: wrap;
      gap: 12px;
      margin-bottom: 28px;
    }
    .info-card {
      flex: 1 1 260px;
      background: rgba(255,255,255,0.85);
      border-radius: 18px;
      padding: 14px 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.08);
      font-size: 13px;
      display: flex;
      align-items: center;
      justify-content: space-between;
    }
    .info-card-title {
      font-weight: 700;
      font-size: 14px;
      margin-bottom: 4px;
    }
    .info-card-sub {
      font-size: 12px;
      color: #777;
    }

    .filter-bar {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
      background: rgba(255,255,255,0.9);
      border-radius: 18px;
      padding: 14px 16px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
      margin-bottom: 14px;
    }
    .filter-item {
      display: flex;
      flex-direction: column;
      min-width: 150px;
      flex: 1 1 0;
      font-size: 12px;
    }
    .filter-label {
      margin-bottom: 4px;
      color: #555;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .filter-label-badge {
      display: inline-flex;
      width: 18px;
      height: 18px;
      border-radius: 999px;
      align-items: center;
      justify-content: center;
      background: #ffcf99;
      font-size: 11px;
      font-weight: 700;
      color: #603000;
    }
    select {
      padding: 7px 9px;
      border-radius: 999px;
      border: 1px solid rgba(0,0,0,0.1);
      font-size: 13px;
      outline: none;
      background: #fff;
    }
    select:disabled {
      background: #f1f1f1;
      color: #aaa;
    }

    .btn {
      border: none;
      border-radius: 999px;
      padding: 8px 18px;
      font-size: 13px;
      font-weight: 600;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      justify-content: center;
      gap: 6px;
      white-space: nowrap;
    }
    .btn-primary {
      background: linear-gradient(to right, #ffc857, #ff5e57);
      color: #fff;
      box-shadow: 0 8px 18px rgba(255,118,74,0.45);
    }
    .btn-secondary {
      background: #fff;
      color: #444;
      border: 1px solid rgba(0,0,0,0.1);
    }
    .btn:disabled {
      opacity: .4;
      cursor: default;
      box-shadow: none;
    }

    .chip-row {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 10px;
      margin-bottom: 10px;
      padding: 10px 4px 0;
    }
    .chip {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 5px 10px;
      border-radius: 999px;
      font-size: 12px;
      background: rgba(255,255,255,0.9);
      border: 1px dashed rgba(0,0,0,0.1);
      color: #666;
    }
    .chip strong { color: #e05b2d; }

    .panel {
      background: rgba(255,255,255,0.9);
      border-radius: 18px;
      box-shadow: 0 8px 24px rgba(0,0,0,0.06);
      padding: 16px 16px 20px;
      min-height: 120px;
    }
    .panel-empty {
      font-size: 13px;
      color: #888;
      text-align: center;
      padding: 24px 8px;
      border-radius: 14px;
      border: 1px dashed rgba(0,0,0,0.08);
      background: rgba(255,255,255,0.6);
    }

    .selection-badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      font-size: 13px;
      font-weight: 600;
      margin-bottom: 8px;
    }
    .selection-badge span {
      padding: 3px 8px;
      border-radius: 999px;
      background: #ffece0;
      color: #b74d1c;
      font-size: 12px;
      font-weight: 600;
    }

    .compare-list {
      display: flex;
      flex-direction: column;
      gap: 12px;
    }
    .compare-item {
      display: grid;
      grid-template-columns: minmax(0, 2.1fr) minmax(0, 1.4fr);
      gap: 16px;
      padding: 12px 12px;
      border-radius: 14px;
      background: rgba(255,255,255,0.9);
      border: 1px solid rgba(0,0,0,0.05);
    }
    @media (max-width: 800px) {
      .compare-item { grid-template-columns: 1fr; }
    }
    .compare-header {
      font-size: 13px;
      margin-bottom: 6px;
    }
    .compare-header strong {
      font-size: 14px;
    }
    .compare-tag-row {
      display: flex;
      flex-wrap: wrap;
      gap: 4px;
      font-size: 11px;
      margin-bottom: 4px;
    }
    .tag {
      padding: 2px 7px;
      border-radius: 999px;
      background: #f5f5f5;
      color: #666;
    }
    .compare-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 11px;
      margin-top: 4px;
    }
    .compare-table th,
    .compare-table td {
      padding: 4px 6px;
      text-align: center;
      border-bottom: 1px solid rgba(0,0,0,0.06);
    }
    .compare-table thead th {
      font-weight: 700;
      background: #faf6ff;
    }
    .compare-table tbody tr:last-child td {
      border-bottom: none;
    }
    .year-pill {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      padding: 1px 8px;
      border-radius: 999px;
      font-size: 10px;
      font-weight: 700;
      color: #fff;
    }
    .year-2025 { background: #ff6f61; }
    .year-2024 { background: #ffb347; }
    .year-2023 { background: #6fa8ff; }

    .thermo-wrapper {
      display: flex;
      flex-direction: column;
      gap: 6px;
      font-size: 11px;
      justify-content: center;
    }
    .thermo-chart {
      display: flex;
      align-items: flex-end;
      gap: 10px;
      height: 110px;
      padding: 6px 6px 4px;
      border-radius: 12px;
      background: linear-gradient(to top, rgba(255,255,255,0.9), rgba(255,255,255,0.4));
      border: 1px solid rgba(0,0,0,0.06);
    }
    .thermo-bar {
      flex: 1 1 0;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-end;
      gap: 4px;
    }
    .thermo-column-outer {
      width: 18px;
      border-radius: 999px;
      background: #f1f1f1;
      overflow: hidden;
      position: relative;
      height: 80px;
    }
    .thermo-column-inner {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      border-radius: 999px 999px 0 0;
      background: linear-gradient(to top, #ff6f61, #ffd365);
      height: 0;
      transition: height 0.6s ease-out;
    }
    .thermo-label {
      font-size: 10px;
      color: #666;
    }
    .thermo-score {
      font-size: 11px;
      font-weight: 600;
      color: #333;
    }

    .badge-max {
      padding: 2px 6px;
      border-radius: 999px;
      background: #ffe4e4;
      color: #c94a4a;
      font-size: 11px;
      font-weight: 600;
    }

    .small-muted {
      font-size: 11px;
      color: #999;
      margin-top: 6px;
    }

    .pill-badge {
      padding: 2px 8px;
      border-radius: 999px;
      background: #fff2e4;
      color: #c0641f;
      font-size: 11px;
      margin-left: 4px;
    }
  </style>
</head>
<body>
  <div class="page">
    <h1>ëª¨ë‘ì˜ ìˆ˜ì‹œ 3ê°œë…„ ì…ì‹œê²°ê³¼ ë¹„êµ ì˜¨ë„ê³„</h1>
    <div class="subtitle">Copyright Â© All Teachers &nbsp;|&nbsp; ì¶œì²˜: ì–´ë””ê°€ 3ê°œë…„ ì…ì‹œê²°ê³¼</div>

    <div class="pill-row">
      <div class="pill"><span>ğŸ“Œ</span>ì´ˆê³ ì† ë“œë¡­ë‹¤ìš´ Â· ìµœëŒ€ 3ê°œ ë¹„êµ</div>
      <div class="pill pill--secondary">í‘œ + ì˜¨ë„ê³„ëŠ” <strong>2025 â†’ 2024 â†’ 2023</strong> ìˆœìœ¼ë¡œ í‘œì‹œë©ë‹ˆë‹¤.</div>
    </div>

    <div class="card-row" style="margin-top:14px;">
      <div class="info-card">
        <div>
          <div class="info-card-title">1ì´ˆ ë‚´ ì„ íƒ Â· 3ê°œë…„ cut(50/70) ë¹„êµ</div>
          <div class="info-card-sub">ëŒ€í•™ &gt; ì „í˜• &gt; ëª¨ì§‘ë‹¨ìœ„ë¥¼ ìˆœì„œëŒ€ë¡œ ê³ ë¥¸ ë’¤, ë¹„êµ ì¶”ê°€ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.</div>
        </div>
      </div>
      <div class="info-card">
        <div>
          <div class="info-card-title">ì²´ì˜¨ê³„ ê²Œì´ì§€ë¡œ ë‚œì´ë„ ì²´ê°</div>
          <div class="info-card-sub">70% cut ê¸°ì¤€ìœ¼ë¡œ 1~9ë“±ê¸‰ êµ¬ê°„ì„ ì§ê´€ì ìœ¼ë¡œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.</div>
        </div>
      </div>
    </div>

    <!-- í•„í„° ì˜ì—­ -->
    <div class="filter-bar">
      <div class="filter-item">
        <div class="filter-label">
          <span class="filter-label-badge">1</span> ëŒ€í•™ ì„ íƒ
        </div>
        <select id="univSelect">
          <option value="">ë¡œë”© ì¤‘...</option>
        </select>
      </div>

      <div class="filter-item">
        <div class="filter-label">
          <span class="filter-label-badge">2</span> ì „í˜•ëª… ì„ íƒ
        </div>
        <select id="trackSelect" disabled>
          <option value="">ëŒ€í•™ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
        </select>
      </div>

      <div class="filter-item">
        <div class="filter-label">
          <span class="filter-label-badge">3</span> ëª¨ì§‘ë‹¨ìœ„(í•™ê³¼) ì„ íƒ
        </div>
        <select id="majorSelect" disabled>
          <option value="">ì „í˜•ëª…ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
        </select>
      </div>

      <div class="filter-item" style="max-width: 230px; align-items: flex-end; justify-content: center;">
        <button class="btn btn-primary" id="btnAdd" disabled>
          + ë¹„êµ ì¶”ê°€ <span style="font-size:11px;">(ìµœëŒ€ 3ê°œ)</span>
        </button>
        <button class="btn btn-secondary" id="btnReset" style="margin-top:6px;">
          ì„ íƒ ì´ˆê¸°í™”
        </button>
      </div>
    </div>

    <div class="chip-row">
      <div class="chip">
        <strong>ì„ íƒí•œ ì „í˜• ë¹„êµ (ìµœëŒ€ 3ê°œ)</strong> Â· ë¹„êµ ì¶”ê°€ë¥¼ ëˆ„ë¥¼ ë•Œë§ˆë‹¤ ì•„ë˜ì— ì „í˜•ì´ ìŒ“ì…ë‹ˆë‹¤.
      </div>
      <div class="chip">
        ë¹„êµ í•­ëª©ì€ ë¸Œë¼ìš°ì €ì—ë§Œ ì €ì¥ë˜ë©°, ìƒˆë¡œê³ ì¹¨í•˜ë©´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
      </div>
    </div>

    <!-- ë¹„êµ íŒ¨ë„ -->
    <div class="panel">
      <div id="compareSectionEmpty" class="panel-empty">
        ìœ„ì—ì„œ ìˆœì„œëŒ€ë¡œ <strong>ëŒ€í•™ â†’ ì „í˜•ëª… â†’ ëª¨ì§‘ë‹¨ìœ„</strong>ë¥¼ ì„ íƒí•œ í›„<br/>
        <strong>ã€Œë¹„êµ ì¶”ê°€ã€</strong> ë²„íŠ¼ì„ ëˆŒëŸ¬ ì „í˜•ì„ ìµœëŒ€ 3ê°œê¹Œì§€ ìŒ“ì•„ì£¼ì„¸ìš”.
      </div>

      <div id="compareSection" style="display:none;">
        <div class="selection-badge">
          <span>â˜…</span> ì„ íƒí•œ ì „í˜• ë¹„êµ
          <span class="badge-max" id="compareCountBadge">0 / 3</span>
        </div>
        <div class="compare-list" id="compareList"></div>
        <div class="small-muted">
          cut(50/70)ì€ ì œê³µëœ ë°ì´í„°ë§Œ í‘œì‹œë˜ë©°, ê°’ì´ ì—†ëŠ” ê²½ìš° â€œâ€“â€ ë¡œ í‘œì‹œë©ë‹ˆë‹¤.
        </div>
      </div>
    </div>
  </div>

  <script>
    // ===== ì „ì—­ ìƒíƒœ =====
    let admissionsData = [];
    let filteredByUniv = [];
    let filteredByTrack = [];
    const selectedComparisons = []; // { key, ëŒ€í•™ëª…, ì „í˜•ëª…, ëª¨ì§‘ë‹¨ìœ„, ì¤‘ì‹¬ì „í˜•, rowsByYear }

    const YEAR_ORDER = [2025, 2024, 2023];

    // ===== ìœ í‹¸ í•¨ìˆ˜ =====
    function uniqueSorted(arr) {
      return Array.from(new Set(arr)).sort((a, b) => a.localeCompare(b, "ko"));
    }

    function fillSelect(selectEl, options, placeholder) {
      selectEl.innerHTML = "";
      const opt = document.createElement("option");
      opt.value = "";
      opt.textContent = placeholder;
      selectEl.appendChild(opt);

      for (const v of options) {
        const o = document.createElement("option");
        o.value = v;
        o.textContent = v;
        selectEl.appendChild(o);
      }
    }

    function formatNumber(val) {
      if (val === null || val === undefined || val === "" || Number.isNaN(val)) return "â€“";
      const num = Number(val);
      if (!Number.isFinite(num)) return "â€“";
      return num.toString();
    }

    // ===== ë°ì´í„° ë¡œë“œ =====
    async function loadData() {
      try {
        const res = await fetch("data/data.json?cachebust=" + Date.now());
        const json = await res.json();
        admissionsData = json.map(row => ({
          ...row,
          ì—°ë„: Number(row["ì—°ë„"]),
          ëª¨ì§‘ì¸ì›: row["ëª¨ì§‘ì¸ì›"] === "" ? null : Number(row["ëª¨ì§‘ì¸ì›"]),
          ê²½ìŸë¥ : row["ê²½ìŸë¥ "] === "" ? null : Number(row["ê²½ìŸë¥ "]),
          ì¶©ì›ìˆœìœ„: row["ì¶©ì›ìˆœìœ„"] === "" ? null : Number(row["ì¶©ì›ìˆœìœ„"]),
          cut50: row["50% cut"] === "" ? null : Number(row["50% cut"]),
          cut70: row["70% cut"] === "" ? null : Number(row["70% cut"])
        }));

        initFilterUI();
      } catch (e) {
        console.error(e);
        alert("data/data.json ì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. íŒŒì¼ ìœ„ì¹˜ë¥¼ í™•ì¸í•´ì£¼ì„¸ìš”.");
      }
    }

    // ===== í•„í„° UI ì´ˆê¸°í™” =====
    function initFilterUI() {
      const univSelect = document.getElementById("univSelect");
      const trackSelect = document.getElementById("trackSelect");
      const majorSelect = document.getElementById("majorSelect");
      const btnAdd = document.getElementById("btnAdd");
      const btnReset = document.getElementById("btnReset");

      // ëŒ€í•™ ì˜µì…˜
      const univs = uniqueSorted(admissionsData.map(r => r["ëŒ€í•™ëª…"]));
      fillSelect(univSelect, univs, "ëŒ€í•™ì„ ì„ íƒí•˜ì„¸ìš”");

      univSelect.addEventListener("change", () => {
        const univ = univSelect.value;
        resetCompareInputs({ track: true, major: true });

        if (!univ) {
          trackSelect.disabled = true;
          majorSelect.disabled = true;
          btnAdd.disabled = true;
          return;
        }

        filteredByUniv = admissionsData.filter(r => r["ëŒ€í•™ëª…"] === univ);
        const tracks = uniqueSorted(filteredByUniv.map(r => r["ì „í˜•ëª…"]));
        trackSelect.disabled = false;
        fillSelect(trackSelect, tracks, "ì „í˜•ëª…ì„ ì„ íƒí•˜ì„¸ìš”");
        trackSelect.focus();
      });

      trackSelect.addEventListener("change", () => {
        const track = trackSelect.value;
        resetCompareInputs({ major: true });

        if (!track) {
          majorSelect.disabled = true;
          btnAdd.disabled = true;
          return;
        }

        filteredByTrack = filteredByUniv.filter(r => r["ì „í˜•ëª…"] === track);
        const majors = uniqueSorted(filteredByTrack.map(r => r["ëª¨ì§‘ë‹¨ìœ„"]));
        majorSelect.disabled = false;
        fillSelect(majorSelect, majors, "ëª¨ì§‘ë‹¨ìœ„ë¥¼ ì„ íƒí•˜ì„¸ìš”");
        majorSelect.focus();
      });

      majorSelect.addEventListener("change", () => {
        const major = majorSelect.value;
        btnAdd.disabled = !major || selectedComparisons.length >= 3;
      });

      btnAdd.addEventListener("click", () => {
        const univ = univSelect.value;
        const track = trackSelect.value;
        const major = majorSelect.value;

        if (!univ || !track || !major) return;

        addComparison(univ, track, major);
      });

      btnReset.addEventListener("click", () => {
        univSelect.value = "";
        trackSelect.value = "";
        majorSelect.value = "";

        trackSelect.disabled = true;
        majorSelect.disabled = true;

        filteredByUniv = [];
        filteredByTrack = [];

        document.getElementById("btnAdd").disabled = true;
      });
    }

    function resetCompareInputs(opts) {
      const trackSelect = document.getElementById("trackSelect");
      const majorSelect = document.getElementById("majorSelect");

      if (opts.track) {
        trackSelect.value = "";
        trackSelect.disabled = true;
      }
      if (opts.major) {
        majorSelect.value = "";
        majorSelect.disabled = true;
      }
      document.getElementById("btnAdd").disabled = true;
    }

    // ===== ë¹„êµ í•­ëª© ì¶”ê°€ =====
    function addComparison(univ, track, major) {
      if (selectedComparisons.length >= 3) {
        alert("ìµœëŒ€ 3ê°œê¹Œì§€ë§Œ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        return;
      }

      const key = `${univ} | ${track} | ${major}`;
      if (selectedComparisons.some(c => c.key === key)) {
        alert("ì´ë¯¸ ì¶”ê°€ëœ ì „í˜•ì…ë‹ˆë‹¤.");
        return;
      }

      const rows = {};
      YEAR_ORDER.forEach(year => {
        rows[year] = admissionsData.find(
          r =>
            r["ì—°ë„"] === year &&
            r["ëŒ€í•™ëª…"] === univ &&
            r["ì „í˜•ëª…"] === track &&
            r["ëª¨ì§‘ë‹¨ìœ„"] === major
        ) || null;
      });

      const sampleRow = rows[YEAR_ORDER.find(y => rows[y])];

      selectedComparisons.push({
        key,
        ëŒ€í•™ëª…: univ,
        ì „í˜•ëª…: track,
        ëª¨ì§‘ë‹¨ìœ„: major,
        ì¤‘ì‹¬ì „í˜•: sampleRow ? sampleRow["ì¤‘ì‹¬ì „í˜•"] : null,
        rowsByYear: rows
      });

      renderComparison();
      document.getElementById("btnAdd").disabled = selectedComparisons.length >= 3;
    }

    // ===== ë¹„êµ ì˜ì—­ ë Œë”ë§ =====
    function renderComparison() {
      const emptyPane = document.getElementById("compareSectionEmpty");
      const section = document.getElementById("compareSection");
      const list = document.getElementById("compareList");
      const countBadge = document.getElementById("compareCountBadge");

      if (selectedComparisons.length === 0) {
        emptyPane.style.display = "block";
        section.style.display = "none";
        return;
      }

      emptyPane.style.display = "none";
      section.style.display = "block";
      countBadge.textContent = `${selectedComparisons.length} / 3`;

      list.innerHTML = "";

      selectedComparisons.forEach((item, idx) => {
        const container = document.createElement("div");
        container.className = "compare-item";

        // ---- ì™¼ìª½: í…ìŠ¤íŠ¸ + í‘œ ----
        const left = document.createElement("div");

        const header = document.createElement("div");
        header.className = "compare-header";
        header.innerHTML = `<strong>${idx + 1}. ${item.ëŒ€í•™ëª…} ${item.ëª¨ì§‘ë‹¨ìœ„}</strong>`;
        left.appendChild(header);

        const tagRow = document.createElement("div");
        tagRow.className = "compare-tag-row";

        const t1 = document.createElement("div");
        t1.className = "tag";
        t1.textContent = `ì „í˜•ëª…: ${item.ì „í˜•ëª…}`;
        tagRow.appendChild(t1);

        if (item.ì¤‘ì‹¬ì „í˜•) {
          const t2 = document.createElement("div");
          t2.className = "tag";
          t2.textContent = `ì¤‘ì‹¬ì „í˜•: ${item.ì¤‘ì‹¬ì „í˜•}`;
          tagRow.appendChild(t2);
        }

        const t3 = document.createElement("div");
        t3.className = "tag";
        t3.textContent = "3ê°œë…„ ì…ê²° ë¹„êµ";
        tagRow.appendChild(t3);

        left.appendChild(tagRow);

        const table = document.createElement("table");
        table.className = "compare-table";

        const thead = document.createElement("thead");
        thead.innerHTML = `
          <tr>
            <th>ì—°ë„</th>
            <th>ëª¨ì§‘ì¸ì›</th>
            <th>ê²½ìŸë¥ </th>
            <th>ì¶©ì›</th>
            <th>50% cut</th>
            <th>70% cut</th>
          </tr>`;
        table.appendChild(thead);

        const tbody = document.createElement("tbody");

        YEAR_ORDER.forEach(year => {
          const rowData = item.rowsByYear[year];
          const tr = document.createElement("tr");
          const yearClass = year === 2025 ? "year-2025" : year === 2024 ? "year-2024" : "year-2023";

          let yearLabel = "";
          if (year === 2025) yearLabel = "2025 (ìµœê·¼)";
          else if (year === 2024) yearLabel = "2024";
          else yearLabel = "2023";

          tr.innerHTML = `
            <td><span class="year-pill ${yearClass}">${yearLabel}</span></td>
            <td>${rowData ? formatNumber(rowData.ëª¨ì§‘ì¸ì›) : "â€“"}</td>
            <td>${rowData ? formatNumber(rowData.ê²½ìŸë¥ ) : "â€“"}</td>
            <td>${rowData ? formatNumber(rowData.ì¶©ì›ìˆœìœ„) : "â€“"}</td>
            <td>${rowData ? formatNumber(rowData.cut50) : "â€“"}</td>
            <td>${rowData ? formatNumber(rowData.cut70) : "â€“"}</td>
          `;
          tbody.appendChild(tr);
        });

        table.appendChild(tbody);
        left.appendChild(table);

        // ---- ì˜¤ë¥¸ìª½: ì˜¨ë„ê³„ ì°¨íŠ¸ ----
        const right = document.createElement("div");
        right.className = "thermo-wrapper";

        const title = document.createElement("div");
        title.innerHTML = `ğŸŒ¡ <strong>70% cut ì˜¨ë„ê³„</strong><span class="pill-badge">1ë“±ê¸‰ â†” 9ë“±ê¸‰ êµ¬ê°„ ìŠ¤ì¼€ì¼</span>`;
        right.appendChild(title);

        const chart = document.createElement("div");
        chart.className = "thermo-chart";

        YEAR_ORDER.forEach(year => {
          const rowData = item.rowsByYear[year];
          const score = rowData ? rowData.cut70 : null;

          const bar = document.createElement("div");
          bar.className = "thermo-bar";

          const outer = document.createElement("div");
          outer.className = "thermo-column-outer";

          const inner = document.createElement("div");
          inner.className = "thermo-column-inner";

          const minVal = 1;
          const maxVal = 9;

          let ratio = 0;
          if (score !== null && score !== undefined && !Number.isNaN(score)) {
            const clamped = Math.max(minVal, Math.min(maxVal, score));
            ratio = (clamped - minVal) / (maxVal - minVal);
          }
          inner.style.height = (ratio * 100) + "%";

          outer.appendChild(inner);

          const scoreLabel = document.createElement("div");
          scoreLabel.className = "thermo-score";
          scoreLabel.textContent = score ? score.toFixed(2) : "â€“";

          const label = document.createElement("div");
          label.className = "thermo-label";
          label.textContent = year + "ë…„";

          bar.appendChild(outer);
          bar.appendChild(scoreLabel);
          bar.appendChild(label);

          chart.appendChild(bar);
        });

        right.appendChild(chart);

        const note = document.createElement("div");
        note.className = "small-muted";
        note.textContent = "â€» 70% cut ê°’ì´ ì—†ëŠ” ì—°ë„ëŠ” ê²Œì´ì§€ê°€ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤.";
        right.appendChild(note);

        container.appendChild(left);
        container.appendChild(right);

        list.appendChild(container);
      });
    }

    // ===== ì´ˆê¸° ì‹¤í–‰ =====
    document.addEventListener("DOMContentLoaded", () => {
      loadData();
    });
  </script>
</body>
</html>
