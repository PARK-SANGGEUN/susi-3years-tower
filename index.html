<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <title>ëª¨ë‘ì˜ ìˆ˜ì‹œ 3ê°œë…„ ì…ì‹œê²°ê³¼ ë¹„êµ ì˜¨ë„ê³„</title>
  <meta name="viewport" content="width=device-width,initial-scale=1.0" />
  <style>
    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Noto Sans KR", sans-serif;
      background: linear-gradient(180deg, #ffe1cc 0%, #ffeaf6 50%, #e4f3ff 100%);
      color: #222;
    }

    .page {
      max-width: 1180px;
      margin: 0 auto;
      padding: 18px 14px 80px;
    }

    h1 {
      margin: 6px 0 2px;
      font-size: 30px;
      font-weight: 900;
      letter-spacing: -0.05em;
    }

    .sub-title {
      font-size: 15px;
      font-weight: 700;
      margin-bottom: 6px;
    }

    .meta-line {
      font-size: 13px;
      font-weight: 800;
      margin: 1px 0;
    }

    .meta-line span.label {
      font-weight: 900;
      padding-right: 4px;
    }

    .meta-line span.value {
      font-weight: 700;
    }

    .badge-line {
      margin: 12px 0 18px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      padding: 6px 12px;
      border-radius: 999px;
      font-size: 12px;
      font-weight: 800;
      letter-spacing: -0.02em;
      box-shadow: 0 7px 20px rgba(0,0,0,0.12);
      border: 1px solid rgba(255,255,255,0.8);
      backdrop-filter: blur(10px);
    }
    .badge-orange { background: linear-gradient(90deg,#ff9a6b,#ff5b7a); color:#fff; }
    .badge-blue   { background: linear-gradient(90deg,#6bc5ff,#8c7bff); color:#fff; }
    .badge-gray   { background: rgba(255,255,255,0.85); color:#444; }

    .card {
      background: rgba(255,255,255,0.95);
      border-radius: 18px;
      padding: 16px 18px 18px;
      margin-bottom: 16px;
      box-shadow: 0 12px 35px rgba(0,0,0,0.10);
      border: 1px solid rgba(255,255,255,0.9);
      transition: transform .15s ease, box-shadow .15s ease;
    }
    .card:hover {
      transform: translateY(-2px);
      box-shadow: 0 14px 40px rgba(0,0,0,0.14);
    }

    .card-header {
      font-size: 15px;
      font-weight: 900;
      margin-bottom: 10px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .card-header span.num {
      width: 22px;
      height: 22px;
      border-radius: 7px;
      background: #ff7b5c;
      color: #fff;
      display:flex;
      align-items:center;
      justify-content:center;
      font-size: 12px;
    }

    .search-row {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .field {
      flex: 1 1 200px;
      min-width: 180px;
    }
    .field-label {
      font-size: 13px;
      font-weight: 800;
      margin-bottom: 4px;
    }
    select {
      width: 100%;
      padding: 11px 12px;
      border-radius: 12px;
      border: 2px solid #ffb38a;
      font-size: 15px;
      font-weight: 700;
      background: #fffdfb;
      outline: none;
      appearance: none;
      background-image: linear-gradient(45deg,transparent 50%,#ff7b5c 50%),linear-gradient(135deg,#ff7b5c 50%,transparent 50%);
      background-position: calc(100% - 16px) 16px, calc(100% - 11px) 16px;
      background-size: 6px 6px, 6px 6px;
      background-repeat: no-repeat;
    }
    select:disabled {
      border-color: #e1e1e1;
      background-color: #f7f7f7;
      color:#999;
    }

    .search-actions {
      margin-top: 14px;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
      justify-content: flex-end;
    }

    .btn {
      border: none;
      border-radius: 14px;
      padding: 10px 18px;
      font-size: 14px;
      font-weight: 900;
      cursor: pointer;
      letter-spacing: -0.02em;
      display: inline-flex;
      align-items: center;
      gap: 6px;
      box-shadow: 0 8px 20px rgba(0,0,0,0.12);
      transition: transform .1s ease, box-shadow .1s ease, filter .1s ease;
      white-space: nowrap;
    }
    .btn-main {
      background: linear-gradient(120deg,#ff7b5c,#ff3c7d);
      color:#fff;
    }
    .btn-sub {
      background: #ffffff;
      color:#444;
    }
    .btn:disabled {
      cursor: default;
      opacity: .5;
      box-shadow: none;
    }
    .btn:not(:disabled):hover {
      transform: translateY(-1px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.16);
      filter: brightness(1.02);
    }

    .hint {
      font-size: 12px;
      color:#555;
      margin-top:6px;
      line-height: 1.5;
    }

    #currentResult {
      margin-top: 4px;
    }
    .result-empty {
      font-size: 13px;
      color:#555;
      padding: 10px 4px;
      line-height: 1.6;
    }
    .result-header-line {
      font-size: 14px;
      font-weight: 800;
      margin-bottom: 6px;
    }
    .result-header-line span.tag {
      display:inline-block;
      padding:3px 8px;
      border-radius: 999px;
      font-size:11px;
      margin-right:6px;
      background: #ffe1ce;
    }
    .result-title {
      font-size: 15px;
      font-weight: 900;
      margin-bottom: 4px;
    }
    .result-sub {
      font-size: 13px;
      color:#555;
      margin-bottom: 10px;
    }

    table.result-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 13px;
      margin-top: 4px;
    }
    table.result-table th,
    table.result-table td {
      padding: 6px 6px;
      text-align: center;
      border-bottom: 1px solid #f0f0f0;
    }
    table.result-table th {
      background: #fff4ee;
      font-weight: 800;
    }

    .thermo-wrapper {
      display:flex;
      gap:14px;
      margin-top: 10px;
      align-items:flex-end;
    }
    .thermo-col {
      flex:1;
      text-align:center;
      font-size: 12px;
      font-weight:700;
      color:#444;
    }
    .thermo-year {
      margin-bottom:4px;
    }
    .thermo-shell {
      height: 160px;
  padding: 4px;
  border-radius: 40px;
  background: linear-gradient(180deg, #ffffff, #ffe6d9);
  border: 2px solid rgba(255,255,255,0.9);
  position: relative;
  overflow: visible;
  box-shadow: inset 0 0 10px rgba(0,0,0,0.08)
    }
    .thermo-bulb {
  position: absolute;
  bottom: -22px;
  left: 50%;
  width: 44px;
  height: 44px;
  transform: translateX(-50%);
  border-radius: 50%;
  background: radial-gradient(circle at 30% 30%, #ff8c6a, #ff3e73);
  box-shadow: 0 8px 14px rgba(255, 60, 80, 0.5);
}
    .thermo-fill {
       position: absolute;
  left: 8px;
  right: 8px;
  bottom: 20px;
  border-radius: 30px;
  background: linear-gradient(180deg, #ff4d6d, #ffb76b);
  box-shadow: 0 6px 16px rgba(255,120,80,0.55);
  transition: height .7s ease;
    }
    .thermo-fill.level-easy {
      background: linear-gradient(180deg,#33dd77,#bbff88);
  box-shadow:0 6px 14px rgba(60,180,80,0.45);
    }
    .thermo-value {
       font-size: 16px;
  font-weight: 900;
  margin-top: 10px;
    }

    .compare-item {
      margin-top: 10px;
      padding: 10px 12px 14px;
      border-radius: 16px;
      background: rgba(255,255,255,0.98);
      box-shadow: 0 10px 32px rgba(0,0,0,0.12);
      border: 1px solid rgba(255,255,255,0.9);
      position: relative;
    }
    .compare-item-header {
      display:flex;
      justify-content:space-between;
      gap:10px;
      align-items:center;
      margin-bottom:6px;
    }
    .compare-label {
      font-size: 13px;
      font-weight: 900;
    }
    .badge-index {
      display:inline-flex;
      align-items:center;
      justify-content:center;
      width:20px;
      height:20px;
      border-radius:999px;
      background:#ff7b5c;
      color:#fff;
      font-size:11px;
      margin-right:4px;
    }

    .btn-mini {
      padding:4px 9px;
      font-size:11px;
      border-radius:999px;
      background:#ffe9ef;
      color:#c0394f;
      box-shadow:none;
    }
    .btn-mini:hover {
      box-shadow:none;
      transform:none;
      filter:brightness(0.98);
    }

    @media (max-width: 900px) {
      h1 { font-size:24px; }
      .sub-title { font-size:14px; }
      .card { padding:14px 14px 16px; }
      select { font-size:14px; }
    }

    @media (max-width: 640px) {
      h1 { font-size:22px; }
      .search-actions { justify-content:flex-start; }
      .btn { flex:1 1 auto; justify-content:center; }
    }
  </style>
</head>
<body>
  <div class="page">
    <h1>ëª¨ë‘ì˜ ìˆ˜ì‹œ 3ê°œë…„ ì…ì‹œê²°ê³¼ ë¹„êµ ì˜¨ë„ê³„</h1>
    <div class="sub-title">ëŒ€í•™ Â· ëª¨ì§‘ë‹¨ìœ„ Â· ì „í˜•ìœ í˜• Â· ì„¸ë¶€ì „í˜•ì„ ì„ íƒí•˜ì—¬ 3ê°œë…„ 70% cutì„ í•œëˆˆì— ë¹„êµí•˜ì„¸ìš”.</div>
    <div class="meta-line"><span class="label">Copyright</span><span class="value">@All Teachers</span></div>
    <div class="meta-line"><span class="label">ì¶œì²˜</span><span class="value">3ê°œë…„ ì–´ë””ê°€ ìˆ˜ì‹œ ì…ì‹œê²°ê³¼</span></div>

    <div class="badge-line">
      <span class="badge badge-orange">3ê°œë…„ cut(50/70) &amp; ì˜¨ë„ê³„ë¡œ ë‚œì´ë„ ì²´ê°</span>
      <span class="badge badge-blue">êµê³¼ Â· ì¢…í•© ì „í˜•ìœ í˜•ë³„ ì •ë ¬</span>
      <span class="badge badge-gray">ê²€ìƒ‰ ê²°ê³¼ 1ê°œ + ë¹„êµ ì¶”ê°€ ëª©ë¡(ìµœëŒ€ 3ê°œ) ëˆ„ì </span>
    </div>

    <div class="card">
      <div class="card-header">
        <span class="num">1</span> ê²€ìƒ‰ ê¸°ì¤€ ì„ íƒ (í•œ ì¤„ ê²€ìƒ‰ í–‰)
      </div>
      <div class="search-row">
        <div class="field">
          <div class="field-label">ëŒ€í•™ ì„ íƒ</div>
          <select id="univSelect">
            <option value="">ë¡œë”© ì¤‘...</option>
          </select>
        </div>
        <div class="field">
          <div class="field-label">ëª¨ì§‘ë‹¨ìœ„(í•™ê³¼) ì„ íƒ</div>
          <select id="majorSelect" disabled>
            <option value="">ëŒ€í•™ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
          </select>
        </div>
        <div class="field">
          <div class="field-label">ì „í˜•ìœ í˜• ì„ íƒ (êµê³¼ / ì¢…í•©)</div>
          <select id="typeSelect" disabled>
            <option value="">ëª¨ì§‘ë‹¨ìœ„ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
          </select>
        </div>
        <div class="field">
          <div class="field-label">ì„¸ë¶€ ì „í˜• ì„ íƒ</div>
          <select id="detailSelect" disabled>
            <option value="">ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
          </select>
        </div>
      </div>
      <div class="search-actions">
        <button id="addCompareBtn" class="btn btn-main" disabled>ï¼‹ ë¹„êµ ì¶”ê°€ (ìµœëŒ€ 3ê°œ)</button>
        <button id="resetBtn" class="btn btn-sub">ì„ íƒ ì´ˆê¸°í™”</button>
      </div>
      <div class="hint">
        ê¸°ë³¸ í™”ë©´ì€ í˜„ì¬ ì„ íƒí•œ 1ê°œ ì „í˜•ì˜ 3ê°œë…„ ë¹„êµì…ë‹ˆë‹¤.<br />
        ë¹„êµ ì¶”ê°€ ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì„ íƒì´ ë¹„êµ ëª©ë¡ì— ëˆ„ì ë˜ë©°, ì„ íƒì„ ë°”ê¿”ë„ ë¹„êµ ëª©ë¡ì€ ìœ ì§€ë©ë‹ˆë‹¤.
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <span class="num">2</span> í˜„ì¬ ì„ íƒ 1ê°œ ì „í˜•ì˜ 3ê°œë…„ ê²°ê³¼
      </div>
      <div id="currentResult">
        <div class="result-empty">
          ì•„ì§ ì„ íƒëœ ì „í˜•ì´ ì—†ìŠµë‹ˆë‹¤.<br />
          ìœ„ ê²€ìƒ‰ í–‰ì—ì„œ ëŒ€í•™ â†’ ëª¨ì§‘ë‹¨ìœ„ â†’ ì „í˜•ìœ í˜•(êµê³¼/ì¢…í•©) â†’ ì„¸ë¶€ì „í˜•ì„ ìˆœì„œëŒ€ë¡œ ì„ íƒí•˜ë©´<br />
          2025 Â· 2024 Â· 2023í•™ë…„ë„ 3ê°œë…„ cut(50/70)ê³¼ ì˜¨ë„ê³„ ê·¸ë˜í”„ê°€ ì—¬ê¸° í‘œì‹œë©ë‹ˆë‹¤.
        </div>
      </div>
    </div>

    <div class="card">
      <div class="card-header">
        <span class="num">3</span> ì„ íƒ ë¹„êµ ëª©ë¡ (ìµœëŒ€ 3ê°œê¹Œì§€ ëˆ„ì )
      </div>
      <div class="hint">
        ë¹„êµ ì¶”ê°€ ë²„íŠ¼ì„ ëˆ„ë¥¸ ì „í˜•ì´ ì•„ë˜ì— ìˆœì„œëŒ€ë¡œ ìŒ“ì…ë‹ˆë‹¤.  
        ê° í•­ëª©ì€ ê°œë³„ ì‚­ì œê°€ ê°€ëŠ¥í•˜ë©°, í˜ì´ì§€ë¥¼ ìƒˆë¡œê³ ì¹¨í•˜ë©´ ëª©ë¡ì´ ì´ˆê¸°í™”ë©ë‹ˆë‹¤.
      </div>
      <div id="compareList"></div>
    </div>
  </div>

  <script>
    const YEARS = [2025, 2024, 2023];
    let DATA = [];
    let compareSelections = [];

    const univSelect   = document.getElementById("univSelect");
    const majorSelect  = document.getElementById("majorSelect");
    const typeSelect   = document.getElementById("typeSelect");
    const detailSelect = document.getElementById("detailSelect");
    const addCompareBtn = document.getElementById("addCompareBtn");
    const resetBtn     = document.getElementById("resetBtn");
    const currentResultBox = document.getElementById("currentResult");
    const compareListBox   = document.getElementById("compareList");

    function unique(arr) {
      return [...new Set(arr)].sort((a,b)=>a.localeCompare(b,"ko"));
    }

    function extractYear(value) {
      const s = String(value ?? "");
      const m = s.match(/(\d{4})/);
      return m ? Number(m[1]) : null;
    }

    function normalizeRow(row) {
      row._year = extractYear(row["ì—°ë„"]);

      ["50% cut","70% cut"].forEach(key=>{
        if (row[key] !== undefined && row[key] !== null && row[key] !== "") {
          const n = Number(row[key]);
          if (!Number.isNaN(n)) row[key] = n;
        }
      });
    }

    async function loadData() {
      try {
        const res = await fetch("data/data.json");
        const raw = await res.json();
        DATA = raw || [];
        DATA.forEach(normalizeRow);
        initUnivSelect();
      } catch (e) {
        console.error(e);
        univSelect.innerHTML = "<option value=''>ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤</option>";
        alert("data/data.jsonì„ ë¶ˆëŸ¬ì˜¤ì§€ ëª»í–ˆìŠµë‹ˆë‹¤. íŒŒì¼ ìœ„ì¹˜ì™€ ì´ë¦„ì„ í™•ì¸í•´ ì£¼ì„¸ìš”.");
      }
    }

    function initUnivSelect() {
      const univs = unique(DATA.map(r => r["ëŒ€í•™ëª…"]).filter(Boolean));
      fillSelect(univSelect, univs, "ëŒ€í•™ì„ ì„ íƒí•˜ì„¸ìš”");
      univSelect.disabled = false;
      univSelect.addEventListener("change", handleUnivChange);
    }

    function fillSelect(select, items, placeholder) {
      select.innerHTML = "";
      const opt = document.createElement("option");
      opt.value = "";
      opt.textContent = placeholder;
      select.appendChild(opt);
      items.forEach(v => {
        const o = document.createElement("option");
        o.value = v;
        o.textContent = v;
        select.appendChild(o);
      });
    }

    function disableSelect(sel, message) {
      sel.disabled = true;
      sel.innerHTML = "";
      const opt = document.createElement("option");
      opt.value = "";
      opt.textContent = message;
      sel.appendChild(opt);
    }

    function handleUnivChange() {
      const univ = univSelect.value;
      disableSelect(majorSelect, "ëŒ€í•™ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
      disableSelect(typeSelect, "ëª¨ì§‘ë‹¨ìœ„ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
      disableSelect(detailSelect, "ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
      addCompareBtn.disabled = true;
      renderCurrentResult(null);

      if (!univ) return;

      const filtered = DATA.filter(r => r["ëŒ€í•™ëª…"] === univ);
      const majors = unique(filtered.map(r => r["ëª¨ì§‘ë‹¨ìœ„"]).filter(Boolean));
      fillSelect(majorSelect, majors, "ëª¨ì§‘ë‹¨ìœ„ë¥¼ ì„ íƒí•˜ì„¸ìš”");
      majorSelect.disabled = false;

      majorSelect.onchange = function () {
        const major = majorSelect.value;
        disableSelect(typeSelect, "ëª¨ì§‘ë‹¨ìœ„ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
        disableSelect(detailSelect, "ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
        addCompareBtn.disabled = true;
        renderCurrentResult(null);

        if (!major) return;

        const list = filtered.filter(r => r["ëª¨ì§‘ë‹¨ìœ„"] === major);
        const types = unique(list.map(r => r["ì¤‘ì‹¬ì „í˜•"]).filter(Boolean));
        fillSelect(typeSelect, types, "ì „í˜•ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”");
        typeSelect.disabled = false;

        typeSelect.onchange = function () {
          const type = typeSelect.value;
          disableSelect(detailSelect, "ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”");
          addCompareBtn.disabled = true;
          renderCurrentResult(null);

          if (!type) return;

          const list2 = list.filter(r => r["ì¤‘ì‹¬ì „í˜•"] === type);
          const details = unique(list2.map(r => r["ì „í˜•ëª…"]).filter(Boolean));
          fillSelect(detailSelect, details, "ì„¸ë¶€ ì „í˜•ì„ ì„ íƒí•˜ì„¸ìš”");
          detailSelect.disabled = false;

          detailSelect.onchange = function () {
            const detail = detailSelect.value;
            addCompareBtn.disabled = !detail;
            if (!detail) {
              renderCurrentResult(null);
            } else {
              const selection = {
                univ,
                major,
                type,
                detail
              };
              renderCurrentResult(selection);
            }
          };
        };
      };
    }

    function getRowsForSelection(sel) {
      if (!sel) return null;
      const byYear = {};
      YEARS.forEach(y => {
        const row = DATA.find(r =>
          r._year === y &&
          r["ëŒ€í•™ëª…"] === sel.univ &&
          r["ëª¨ì§‘ë‹¨ìœ„"] === sel.major &&
          r["ì¤‘ì‹¬ì „í˜•"] === sel.type &&
          r["ì „í˜•ëª…"] === sel.detail
        );
        byYear[y] = row || null;
      });
      return byYear;
    }

function createThermoBlock(rowsByYear) {
  const wrapper = document.createElement("div");
  wrapper.className = "thermo-wrapper";

  YEARS.forEach(year => {
    const col = document.createElement("div");
    col.className = "thermo-col";

    if (year === 2025) col.classList.add("year-2025");

    const label = document.createElement("div");
    label.className = "thermo-year";
    label.textContent = year + "í•™ë…„ë„";
    col.appendChild(label);

    const shell = document.createElement("div");
    shell.className = "thermo-shell";

    const bulb = document.createElement("div");
    bulb.className = "thermo-bulb";

    const fill = document.createElement("div");
    fill.className = "thermo-fill";

    const row = rowsByYear[year];
    const v = row && typeof row["70% cut"] === "number" ? row["70% cut"] : null;

    let heightPercent = 0;
    let text = "ë°ì´í„° ì—†ìŒ";

    if (v !== null) {
      heightPercent = (10 - v) / 9 * 100;
      if (heightPercent < 8) heightPercent = 8;
      if (heightPercent > 100) heightPercent = 100;

      text = v.toFixed(2) + "ë“±ê¸‰";

      if (v >= 4.0) fill.classList.add("level-easy");
    }

    shell.appendChild(fill);
    shell.appendChild(bulb);
    col.appendChild(shell);

    const value = document.createElement("div");
    value.className = "thermo-value";
    value.textContent = text;
    col.appendChild(value);

    setTimeout(() => {
      fill.style.height = heightPercent + "%";
    }, 30);

    wrapper.appendChild(col);
  });

  return wrapper;
    }

    function createTableBlock(rowsByYear) {
  const table = document.createElement("table");
  table.className = "result-table highlight-2025";

  const headerRow = document.createElement("tr");
  ["ì—°ë„","50% cut","70% cut","ëª¨ì§‘ì¸ì›","ê²½ìŸë¥ ","ì¶©ì›ìœ¨"].forEach(h => {
    const th = document.createElement("th");
    th.textContent = h;
    table.appendChild(headerRow);
    headerRow.appendChild(th);
  });

  YEARS.forEach(y => {
    const tr = document.createElement("tr");
    if (y === 2025) tr.classList.add("highlight-2025");

    const row = rowsByYear[y];

    function getVal(key) {
      if (!row || row[key] == null || row[key] === "") return "-";
      return row[key];
    }

    const fields = [
      y,
      getVal("50% cut"),
      getVal("70% cut"),
      getVal("ëª¨ì§‘ì¸ì›"),
      getVal("ê²½ìŸë¥ "),
      getVal("ì¶©ì›ìœ¨")
    ];

    fields.forEach(v=>{
      const td = document.createElement("td");
      td.textContent = v;
      td.style.fontWeight = "800";
      td.style.fontSize = "13px";
      tr.appendChild(td);
    });

    table.appendChild(tr);
  });

  return table;
}

    function createResultBlock(selection, rowsByYear) {
      const container = document.createElement("div");

      const title = document.createElement("div");
      title.className = "result-title";
      title.textContent = selection.univ + " / " + selection.major;
      container.appendChild(title);

      const sub = document.createElement("div");
      sub.className = "result-sub";
      sub.textContent = "[" + selection.type + "] " + selection.detail + " ì „í˜• Â· 3ê°œë…„ cut(50/70) & ì˜¨ë„ê³„ ë¹„êµ";
      container.appendChild(sub);

      const headerLine = document.createElement("div");
      headerLine.className = "result-header-line";
      headerLine.innerHTML =
        "<span class='tag'>ğŸŒ¡ 70% cut ì˜¨ë„ê³„</span>" +
        "<span>1ë“±ê¸‰ì— ê°€ê¹Œìš¸ìˆ˜ë¡ ì˜¨ë„ê°€ ë†’ê²Œ í‘œì‹œë©ë‹ˆë‹¤.</span>";
      container.appendChild(headerLine);

      container.appendChild(createThermoBlock(rowsByYear));

      const headerLine2 = document.createElement("div");
      headerLine2.className = "result-header-line";
      headerLine2.style.marginTop = "10px";
      headerLine2.innerHTML =
        "<span class='tag'>ğŸ“Š 3ê°œë…„ ë°ì´í„° í‘œ</span>" +
        "<span>ì—°ë„ë³„ 50% cut Â· 70% cut ìˆ˜ì¹˜ë¥¼ í•¨ê»˜ í™•ì¸í•˜ì„¸ìš”.</span>";
      container.appendChild(headerLine2);

      container.appendChild(createTableBlock(rowsByYear));

      return container;
    }

    function renderCurrentResult(selection) {
      currentResultBox.innerHTML = "";
      if (!selection) {
        const div = document.createElement("div");
        div.className = "result-empty";
        div.innerHTML =
          "ì•„ì§ ì„ íƒëœ ì „í˜•ì´ ì—†ìŠµë‹ˆë‹¤.<br>" +
          "ìœ„ ê²€ìƒ‰ í–‰ì—ì„œ ëŒ€í•™ â†’ ëª¨ì§‘ë‹¨ìœ„ â†’ ì „í˜•ìœ í˜•(êµê³¼/ì¢…í•©) â†’ ì„¸ë¶€ì „í˜•ì„ ìˆœì„œëŒ€ë¡œ ì„ íƒí•´ ì£¼ì„¸ìš”.";
        currentResultBox.appendChild(div);
        return;
      }

      const rowsByYear = getRowsForSelection(selection);
      const hasAny = YEARS.some(y => rowsByYear[y]);

      if (!hasAny) {
        const div = document.createElement("div");
        div.className = "result-empty";
        div.textContent = "í•´ë‹¹ ì „í˜•ì— ëŒ€í•œ 3ê°œë…„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
        currentResultBox.appendChild(div);
        return;
      }

      currentResultBox.appendChild(createResultBlock(selection, rowsByYear));
    }

    function renderCompareList() {
      compareListBox.innerHTML = "";
      if (compareSelections.length === 0) {
        const div = document.createElement("div");
        div.className = "result-empty";
        div.textContent = "ë¹„êµ ëª©ë¡ì´ ë¹„ì–´ ìˆìŠµë‹ˆë‹¤. ìƒë‹¨ì—ì„œ ì „í˜•ì„ ì„ íƒí•œ í›„ 'ë¹„êµ ì¶”ê°€'ë¥¼ ëˆŒëŸ¬ì£¼ì„¸ìš”.";
        compareListBox.appendChild(div);
        return;
      }

      compareSelections.forEach((sel, index) => {
        const rowsByYear = getRowsForSelection(sel);
        const hasAny = YEARS.some(y => rowsByYear[y]);

        const item = document.createElement("div");
        item.className = "compare-item";

        const header = document.createElement("div");
        header.className = "compare-item-header";

        const left = document.createElement("div");
        left.className = "compare-label";
        left.innerHTML =
          "<span class='badge-index'>" + (index+1) + "</span>" +
          sel.univ + " / " + sel.major +
          " <span style='font-size:11px;color:#777'>[" + sel.type + "] " + sel.detail + "</span>";

        const right = document.createElement("div");
        const btnDel = document.createElement("button");
        btnDel.className = "btn btn-mini";
        btnDel.textContent = "ì‚­ì œ";
        btnDel.onclick = function () {
          compareSelections.splice(index, 1);
          renderCompareList();
        };
        right.appendChild(btnDel);

        header.appendChild(left);
        header.appendChild(right);
        item.appendChild(header);

        if (!hasAny) {
          const empty = document.createElement("div");
          empty.className = "result-empty";
          empty.textContent = "ì´ ì „í˜•ì€ 3ê°œë…„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.";
          item.appendChild(empty);
        } else {
          item.appendChild(createResultBlock(sel, rowsByYear));
        }

        compareListBox.appendChild(item);
      });
    }

    addCompareBtn.addEventListener("click", function () {
      const univ = univSelect.value;
      const major = majorSelect.value;
      const type  = typeSelect.value;
      const detail= detailSelect.value;

      if (!univ || !major || !type || !detail) {
        alert("ëŒ€í•™, ëª¨ì§‘ë‹¨ìœ„, ì „í˜•ìœ í˜•, ì„¸ë¶€ì „í˜•ì„ ëª¨ë‘ ì„ íƒí•œ í›„ ë¹„êµë¥¼ ì¶”ê°€í•´ ì£¼ì„¸ìš”.");
        return;
      }
      if (compareSelections.length >= 3) {
        alert("ë¹„êµ ëª©ë¡ì€ ìµœëŒ€ 3ê°œê¹Œì§€ ì¶”ê°€í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");
        return;
      }

      const selection = { univ, major, type, detail };

      const exists = compareSelections.some(s =>
        s.univ === univ && s.major === major && s.type === type && s.detail === detail
      );
      if (exists) {
        alert("ì´ë¯¸ ë¹„êµ ëª©ë¡ì— ìˆëŠ” ì „í˜•ì…ë‹ˆë‹¤.");
        return;
      }

      compareSelections.push(selection);
      renderCompareList();
    });

    resetBtn.addEventListener("click", function () {
      univSelect.selectedIndex = 0;
      handleUnivChange();
      renderCurrentResult(null);
    });

    loadData();
    renderCompareList();
  </script>
</body>
</html>

