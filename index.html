<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>ëª¨ë‘ì˜ ìˆ˜ì‹œ 3ê°œë…„ ë¹„êµ ì˜¨ë„ê³„</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
*{box-sizing:border-box;}

body{
  margin:0;
  font-family: "Pretendard", -apple-system, BlinkMacSystemFont, "Segoe UI", Arial;
  background:linear-gradient(180deg,#ffe5d1,#ffeaf3);
  color:#111;
}

.container{
  max-width:1100px;
  margin:0 auto;
  padding:18px 12px 80px;
}

/* ì œëª© */
h1{
  font-size:30px;
  font-weight:900;
  margin:0 0 4px;
}

.sub{
  font-size:14px;
  font-weight:600;
  margin-bottom:16px;
}

/* í¼ì§í•œ ì„ íƒë°•ìŠ¤ */
select{
  width:100%;
  padding:12px 14px;
  border-radius:12px;
  border:2px solid #ffaf7b;
  font-size:16px;
  font-weight:700;
}

label{
  font-size:15px;
  font-weight:900;
  margin-bottom:4px;
  display:block;
}

.card{
  background:white;
  padding:14px 14px 16px;
  border-radius:16px;
  margin-bottom:14px;
  box-shadow:0 6px 20px rgba(0,0,0,0.08);
}

.btn{
  padding:12px 16px;
  border-radius:14px;
  border:none;
  font-size:16px;
  font-weight:900;
  cursor:pointer;
}

.btn-main{
  background:linear-gradient(90deg,#ff9a6b,#ff5b5b);
  color:white;
}

.btn-sub{
  background:#eee;
}

/* ë¹„êµ ë°•ìŠ¤ */
.compare-item{
  border-radius:14px;
  padding:12px;
  margin-bottom:14px;
  background:white;
  box-shadow:0 6px 18px rgba(0,0,0,0.07);
}

/* ì˜¨ë„ê³„ ì»¨í…Œì´ë„ˆ */
.thermo-box{
  display:flex;
  gap:12px;
  justify-content:center;
  align-items:flex-end;
  height:120px;
}

.bar{
  width:22px;
  background:#f2f2f2;
  border-radius:10px;
  position:relative;
}

.bar-inner{
  position:absolute;
  bottom:0;
  left:0;
  width:100%;
  background:linear-gradient(180deg,#ff5f6d,#ffc371);
  border-radius:10px 10px 0 0;
  height:0;
  transition:0.6s;
}

@media (max-width:900px){
  h1{font-size:24px;}
  select{font-size:15px;}
}

@media (max-width:600px){
  h1{font-size:22px;}
  .btn{width:100%;}
}
</style>
</head>
<body>

<div class="container">

<h1>ëª¨ë‘ì˜ ìˆ˜ì‹œ 3ê°œë…„ ì…ì‹œê²°ê³¼ ë¹„êµ ì˜¨ë„ê³„</h1>
<div class="sub">ëŒ€í•™Â·ëª¨ì§‘ë‹¨ìœ„Â·ì „í˜•ìœ í˜•Â·ì„¸ë¶€ì „í˜• ì„ íƒ â†’ 3ê°œë…„ ë¹„êµ</div>

<div class="card">
<label>1ï¸âƒ£ ëŒ€í•™ ì„ íƒ</label>
<select id="univSelect">
<option value="">ë¡œë”©ì¤‘...</option>
</select>
</div>

<div class="card">
<label>2ï¸âƒ£ ëª¨ì§‘ë‹¨ìœ„(í•™ê³¼) ì„ íƒ</label>
<select id="majorSelect" disabled>
<option value="">ëŒ€í•™ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
</select>
</div>

<div class="card">
<label>3ï¸âƒ£ ì „í˜•ìœ í˜• ì„ íƒ (êµê³¼ / ì¢…í•©)</label>
<select id="typeSelect" disabled>
<option value="">ëª¨ì§‘ë‹¨ìœ„ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
</select>
</div>

<div class="card">
<label>4ï¸âƒ£ ì„¸ë¶€ ì „í˜• ì„ íƒ</label>
<select id="detailSelect" disabled>
<option value="">ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”</option>
</select>
</div>

<div style="display:flex; gap:10px; flex-wrap:wrap;">
<button id="addBtn" class="btn btn-main" disabled>ï¼‹ ë¹„êµ ì¶”ê°€ (ìµœëŒ€ 3ê°œ)</button>
<button id="resetBtn" class="btn btn-sub">ì„ íƒ ì´ˆê¸°í™”</button>
</div>

<div class="card">
<b>ì„ íƒ ë¹„êµ ëª©ë¡</b>
<div id="compareArea"></div>
</div>

</div>

<script>
let all=[]
let selected=[]

const YEARS=[2025,2024,2023]

async function load(){
 const res=await fetch("data/data.json")
 all=await res.json()
 initUniv()
}

function unique(a){return [...new Set(a)].sort((a,b)=>a.localeCompare(b,"ko"))}

function initUniv(){
 const u=document.getElementById("univSelect")
 const univs=unique(all.map(r=>r["ëŒ€í•™ëª…"]))
 fill(u,univs,"ëŒ€í•™ ì„ íƒí•˜ì„¸ìš”")
 u.onchange=onUniv
}

function onUniv(){
 disable("majorSelect","ëŒ€í•™ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”")
 disable("typeSelect","ëª¨ì§‘ë‹¨ìœ„ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”")
 disable("detailSelect","ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”")
 const val=this.value
 if(!val)return
 const list=all.filter(r=>r["ëŒ€í•™ëª…"]===val)
 const majors=unique(list.map(r=>r["ëª¨ì§‘ë‹¨ìœ„"]))
 fill(majorSelect,majors,"ëª¨ì§‘ë‹¨ìœ„ ì„ íƒí•˜ì„¸ìš”")
 majorSelect.disabled=false
 majorSelect.onchange=()=>onMajor(list)
}

function onMajor(list){
 disable("typeSelect","ëª¨ì§‘ë‹¨ìœ„ë¥¼ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”")
 disable("detailSelect","ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”")

 const val=majorSelect.value
 if(!val)return

 const f=list.filter(r=>r["ëª¨ì§‘ë‹¨ìœ„"]===val)
 const types=unique(f.map(r=>r["ì¤‘ì‹¬ì „í˜•"]))
 fill(typeSelect,types,"ì „í˜•ìœ í˜• ì„ íƒí•˜ì„¸ìš”")
 typeSelect.disabled=true
 if(types.length>0) typeSelect.disabled=false

 typeSelect.onchange=()=>onType(f)
}

function onType(list){
 disable("detailSelect","ì „í˜•ìœ í˜•ì„ ë¨¼ì € ì„ íƒí•˜ì„¸ìš”")
 const val=typeSelect.value
 if(!val)return
 const f=list.filter(r=>r["ì¤‘ì‹¬ì „í˜•"]===val)
 const details=unique(f.map(r=>r["ì „í˜•ëª…"]))
 fill(detailSelect,details,"ì„¸ë¶€ì „í˜• ì„ íƒí•˜ì„¸ìš”")
 detailSelect.disabled=false

 addBtn.disabled=false
 addBtn.onclick=()=>addCompare()
}

function addCompare(){
 if(selected.length>=3){alert("3ê°œê¹Œì§€ë§Œ ë¹„êµí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.");return}

 const item={
  ëŒ€í•™:univSelect.value,
  í•™ê³¼:majorSelect.value,
  ìœ í˜•:typeSelect.value,
  ì „í˜•:detailSelect.value
 }
 selected.push(item)
 renderCompare()
}

function renderCompare(){
 const box=document.getElementById("compareArea")
 box.innerHTML=""
 selected.forEach((s,i)=>{
  const div=document.createElement("div")
  div.className="compare-item"

  div.innerHTML="<b>"+(i+1)+". "+s.ëŒ€í•™+" / "+s.í•™ê³¼+"</b><br>"
     +"["+s.ìœ í˜•+"] "+s.ì „í˜•+" ì „í˜•"

  const rows={}
  YEARS.forEach(y=>{
   rows[y]=all.find(r=>
     r["ì—°ë„"]==y &&
     r["ëŒ€í•™ëª…"]==s.ëŒ€í•™ &&
     r["ëª¨ì§‘ë‹¨ìœ„"]==s.í•™ê³¼ &&
     r["ì¤‘ì‹¬ì „í˜•"]==s.ìœ í˜• &&
     r["ì „í˜•ëª…"]==s.ì „í˜•) || null
  })

  const t=document.createElement("div")
  t.innerHTML="<br><b>ğŸŒ¡ 70%cut ì˜¨ë„ê³„ ë¹„êµ</b>"
  const wrap=document.createElement("div")
  wrap.className="thermo-box"

  YEARS.forEach(y=>{
   const bar=document.createElement("div")
   bar.className="bar"
   const inner=document.createElement("div")
   inner.className="bar-inner"
   const v=rows[y]?rows[y]["70% cut"]:null
   if(v){
     inner.style.height=(v/9*100)+"%"
   }
   bar.appendChild(inner)
   wrap.appendChild(bar)
  })

  div.appendChild(t)
  div.appendChild(wrap)
  box.appendChild(div)
 })
}

function fill(sel,list,ph){
 sel.innerHTML="<option value=''>"+ph+"</option>"
 list.forEach(v=>{
  const o=document.createElement("option")
  o.value=v
  o.textContent=v
  sel.appendChild(o)
 })
}

function disable(id,text){
 const s=document.getElementById(id)
 s.disabled=true
 s.innerHTML="<option>"+text+"</option>"
}

resetBtn.onclick=()=>{
 location.reload()
}

load()
</script>

</body>
</html>
