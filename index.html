<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<title>모두의 수시 3개년 입시결과 비교 온도계</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0" />

<style>
*{box-sizing:border-box}

body{
 margin:0;
 font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,"Noto Sans KR",sans-serif;
 background:linear-gradient(180deg,#ffe4cf,#fef2ff,#e9f6ff);
}

/* ===== 페이지 컨테이너 ===== */
.page{
 max-width:1200px;
 margin:0 auto;
 padding:14px 12px 60px;
}

/* ===== 제목 ===== */
h1{
 font-size:28px;
 font-weight:900;
 margin:6px 0 2px;
}
.sub{
 font-size:14px;
 font-weight:700;
}
.meta{
 font-size:13px;
 font-weight:800;
}

/* 강조 */
strong.highlight2025{
 background:#fff3c4;
 padding:2px 4px;
 border-radius:6px;
}

/* ===== 카드 공통 ===== */
.card{
 background:rgba(255,255,255,0.95);
 border-radius:18px;
 padding:14px 16px 18px;
 margin-top:12px;
 box-shadow:0 12px 35px rgba(0,0,0,.10);
}

/* 현재 선택 카드 */
.card-current{
 border-left:10px solid #ff7b61;
}

/* 비교 카드 */
.card-compare{
 border-left:10px solid #6b9fff;
}

/* ===== 검색 영역 ===== */
.field label{
 font-size:13px;
 font-weight:900;
}

select{
 width:100%;
 padding:14px 14px;
 font-size:16px;
 font-weight:800;
 border-radius:14px;
 border:2px solid #ffb48b;
}

/* 모바일 터치 크게 */
@media(max-width:640px){
 select{font-size:18px;padding:16px}
 button{font-size:18px}
}

/* 버튼 */
button{
 border:none;
 border-radius:14px;
 padding:12px 16px;
 font-size:14px;
 font-weight:900;
 cursor:pointer;
}
.btn-main{background:linear-gradient(120deg,#ff7b5c,#ff3c7d);color:white}
.btn-sub{background:white}

/* ===== thermometer ===== */

.thermo-area{
 display:flex;
 gap:18px;
 margin-top:10px;
}

.thermo-col{
 flex:1;
 text-align:center;
 font-weight:900;
}

/* thermometer structure */
.thermo-body{
 width:60px;
 height:180px;
 border-radius:30px;
 margin:0 auto;
 background:linear-gradient(180deg,#ffffff,#ffe9dc);
 box-shadow:inset 0 0 10px rgba(0,0,0,0.15);
 position:relative;
}

/* tube */
.thermo-tube{
 position:absolute;
 left:50%;
 transform:translateX(-50%);
 bottom:28px;
 width:18px;
 height:130px;
 border-radius:14px;
 background:#eef3ff;
 box-shadow:inset 0 0 6px rgba(0,0,0,.3);
 overflow:hidden;
}

/* fill */
.thermo-fill{
 position:absolute;
 bottom:0;
 left:0;
 width:100%;
 border-radius:14px;
 transition:height .9s ease;
}

/* bottom bulb */
.thermo-bulb{
 position:absolute;
 width:42px;
 height:42px;
 border-radius:50%;
 bottom:-4px;
 left:50%;
 transform:translateX(-50%);
}

/* tick marks */
.thermo-scale{
 position:absolute;
 left:50%;
 top:12px;
 width:90px;
 transform:translateX(-50%);
 font-size:10px;
 color:#333;
}

/* ===== 표 ===== */

table{
 width:100%;
 border-collapse:collapse;
 margin-top:8px;
 font-size:13px;
}
th,td{
 text-align:center;
 padding:6px;
 border-bottom:1px solid #eee;
 border-right:1px solid #eee;
}
th{
 background:#fff3ea;
 font-weight:900;
}

/* 2025 강조 */
tr.year2025{
 background:#fffbe2;
 font-weight:900;
}

/* 상승하락 */
span.up{color:#d63031;font-weight:900}
span.down{color:#0984e3;font-weight:900}
</style>

</head>

<body>

<div class="page">

<h1>모두의 수시 3개년 입시결과 비교 온도계</h1>
<div class="sub">대학·모집단위·전형유형·세부전형 선택 후 3개년 70%cut을 비교하세요</div>
<div class="meta">Copyright <strong>@All Teachers</strong></div>
<div class="meta">출처 3개년 어디가 수시 입시결과</div>

<!-- ===== 검색 카드 ===== -->
<div class="card">
<div><b>검색 기준 선택</b></div>

<div class="field">
<label>대학 선택</label>
<select id="univ"></select>
</div>

<div class="field">
<label>모집단위 선택</label>
<select id="major" disabled></select>
</div>

<div class="field">
<label>전형유형 선택</label>
<select id="type" disabled></select>
</div>

<div class="field">
<label>세부전형 선택</label>
<select id="detail" disabled></select>
</div>

<button id="btnAdd" class="btn-main">비교 추가</button>
<button id="btnReset" class="btn-sub">초기화</button>

</div>

<!-- ===== 현재 선택 결과 ===== -->
<div class="card card-current" id="currentBox">
현재 선택된 전형이 없습니다
</div>

<!-- ===== 비교 목록 ===== -->
<div class="card card-compare" id="compareBox">
비교 목록이 비어 있습니다
</div>

</div>

<script>
const YEARS=[2025,2024,2023];
let DATA=[];
let compare=[];

/********* 데이터 로드 **********/
async function load(){
 const res=await fetch("data/data.json");
 DATA=await res.json();
 DATA.forEach(r=>r._year=parseInt(r["연도"]));
 initUniv();
}
function unique(a){return [...new Set(a)].sort((a,b)=>a.localeCompare(b,"ko"))}

/********* 셀렉트 초기화 **********/
function initUniv(){
 let u=unique(DATA.map(r=>r["대학명"]));
 fill(univ,u,"대학 선택");
 univ.disabled=false;
}
function fill(sel,items,title){
 sel.innerHTML="";
 let o=document.createElement("option");
 o.textContent=title;o.value="";
 sel.appendChild(o);
 items.forEach(v=>{
  let x=document.createElement("option");
  x.value=v;x.textContent=v;
  sel.appendChild(x);
 });
}

/********* 이벤트 연결 **********/
const univ=document.getElementById("univ");
const major=document.getElementById("major");
const type=document.getElementById("type");
const detail=document.getElementById("detail");
const currentBox=document.getElementById("currentBox");
const compareBox=document.getElementById("compareBox");

univ.onchange=()=>{
 const f=DATA.filter(r=>r["대학명"]===univ.value);
 fill(major,unique(f.map(r=>r["모집단위"])),"모집단위 선택");
 major.disabled=false;
 type.disabled=true;detail.disabled=true;
}

major.onchange=()=>{
 const f=DATA.filter(r=>r["대학명"]===univ.value && r["모집단위"]===major.value);
 fill(type,unique(f.map(r=>r["중심전형"])),"전형유형 선택");
 type.disabled=false;
}

type.onchange=()=>{
 const f=DATA.filter(r=>r["대학명"]===univ.value && r["모집단위"]===major.value && r["중심전형"]===type.value);
 fill(detail,unique(f.map(r=>r["전형명"])),"세부전형 선택");
 detail.disabled=false;
}

detail.onchange=()=>{
 renderCurrent();
}

/********* 현재 선택 출력 **********/
function rows(sel){
 let by={};
 YEARS.forEach(y=>{
  by[y]=DATA.find(r=>
   r._year===y &&
   r["대학명"]===univ.value &&
   r["모집단위"]===major.value &&
   r["중심전형"]===type.value &&
   r["전형명"]===detail.value
  )||null;
 });
 return by;
}

function renderCurrent(){
 if(!detail.value){currentBox.innerHTML="현재 선택된 전형이 없습니다";return;}
 const r=rows();
 currentBox.innerHTML="";
 currentBox.appendChild(makeBlock(r,{
  univ:univ.value,
  major:major.value,
  type:type.value,
  detail:detail.value
 }));
}

/********* 비교 목록 **********/
btnAdd.onclick=()=>{
 if(!detail.value)return alert("전형을 모두 선택하세요");
 if(compare.length>=3)return alert("최대 3개");
 compare.push({
  univ:univ.value,major:major.value,type:type.value,detail:detail.value
 });
 renderCompare();
}

btnReset.onclick=()=>{
 location.reload();
}

function renderCompare(){
 compareBox.innerHTML="";
 compare.forEach((s,i)=>{
  const r=rows(s);
  const div=document.createElement("div");
  div.appendChild(makeBlock(r,s));
  compareBox.appendChild(div);
 });
}

/********* 상승/하락 표시 **********/
function arrow(prev,cur){
 if(prev==null||cur==null)return "";
 return cur<prev?`<span class='up'>▲</span>`:`<span class='down'>▼</span>`;
}

/********* thermometer + table block **********/
function makeBlock(r,s){
 const wrap=document.createElement("div");

 /* 제목 */
 let t=document.createElement("div");
 t.innerHTML=`<b>${s.univ} / ${s.major}</b> <br>[${s.type}] ${s.detail}`;
 wrap.appendChild(t);

 /* thermometer area */
 const thermo=document.createElement("div");
 thermo.className="thermo-area";

 YEARS.forEach(y=>{
  let col=document.createElement("div");
  col.className="thermo-col";
  let row=r[y];
  let v=row?Number(row["70% cut"]):null;

  /* 색 결정 */
  let c="#88ff99";
  if(v<=2)c="#ff3b3b";
  else if(v<=3)c="#ff944d";
  else if(v<=4)c="#ffd93b";
  else c="#8bf7ce";

  col.innerHTML=`
   <div>${y}학년도</div>
   <div class="thermo-body">
    <div class="thermo-scale">1 2 3 4 5 6</div>
    <div class="thermo-tube">
     <div class="thermo-fill" style="background:${c};height:${v?((10-v)/9*100):5}%"></div>
    </div>
    <div class="thermo-bulb" style="background:${c}"></div>
   </div>
   <div style="font-size:15px;font-weight:900">${v?v.toFixed(2)+"등급":"-"}</div>
  `;
  thermo.appendChild(col);
 });
 wrap.appendChild(thermo);

 /* table */
 let table=document.createElement("table");

 table.innerHTML=`
 <tr>
  <th>연도</th>
  <th>50% cut</th>
  <th>70% cut</th>
  <th>모집인원</th>
  <th>경쟁률</th>
  <th>충원순위</th>
 </tr>
 `;

 YEARS.forEach((y,i)=>{
  let row=r[y];
  let prev=i===0?null:r[YEARS[i-1]];
  table.innerHTML+=`
  <tr class="${y===2025?"year2025":""}">
   <td>${y}</td>
   <td>${row?row["50% cut"]:"-"}</td>
   <td>${row?row["70% cut"]:"-"}</td>
   <td>${row?row["모집인원"]:"-"}</td>
   <td>${row?row["경쟁률"]:"-"}</td>
   <td>${row?row["충원순위"]:"-"}</td>
  </tr>
 `;
 });

 wrap.appendChild(table);
 return wrap;
}

load();
</script>
</body>
</html>
